{%- if var_header contains 'id="js-currency-switcher"' -%}
	<script type="text/javascript" src="//cdn.shopify.com/s/javascripts/currencies.js" defer="defer"></script>
	<script type="text/javascript" src="{{ 'currency-tools.js' | asset_url }}" defer="defer"></script>
	<script>
		window.addEventListener('DOMContentLoaded', function() {
			var buttons = $('.currency li');
			Currency.format = 'money_format';
			var shopCurrency = '{{ shop.currency }}';
			 
			/* Sometimes merchants change their shop currency, let's tell our JavaScript file */
			Currency.moneyFormats[shopCurrency].money_with_currency_format = theme.moneyFormatCurrency;
			Currency.moneyFormats[shopCurrency].money_format = theme.moneyFormat;
			Currency.moneyFormats[shopCurrency].money_with_currency_format = {{ shop.money_with_currency_format | strip_html | json }};
			Currency.moneyFormats[shopCurrency].money_format = {{ shop.money_format | strip_html | json }};
			/* Cookie currency */
			var cookieCurrency;
			try {cookieCurrency = Currency.cookie.read();} catch (err) {} // ignore errors reading cookies
			
			/* Fix for other pages */
			jQuery('span.money span.money').each(function() {
				jQuery(this).parents('span.money').removeClass('money');
			});
			
			/* Saving the current price */
			jQuery('span.money').each(function() {
				jQuery(this).attr('data-currency-{{ shop.currency }}', jQuery(this).html());
			});
			
			// If there's no cookie or it's the shop currency.
			if (cookieCurrency == null || cookieCurrency === shopCurrency) {
				Currency.currentCurrency = shopCurrency;
			}
			else {
				Currency.currentCurrency = cookieCurrency;
				Currency.convertAll(shopCurrency, cookieCurrency);
			}
			
			
			// CHANGE CONTROLL ELEMENT DESKTOP/MOBILE
			var currencyActive = jQuery('#currency_active');
			var currencySelector = jQuery('.currency_selector');
			
			currencyActive.on('click', function() {
				if ( currencyActive.hasClass('opened') ) {
					currencyActive.removeClass('opened');
					currencySelector.removeClass('opened');
				}
				else {
					currencyActive.addClass('opened');
					currencySelector.addClass('opened');
				}
			});
			
			jQuery(document).on('click', function(){
				if ( currencyActive.hasClass('opened') ) {
					currencyActive.removeClass('opened');
					currencySelector.removeClass('opened');
				}
			});
			
			currencyActive.on('click', function(e) {
				e.stopPropagation();
			});

			
			jQuery('.currency')
					.find('.active')
					.removeClass('active')
					.parent()
					.find('[data-currency=' + Currency.currentCurrency + ']')
					.addClass('active');
			
			if(jQuery('.currency-selector-box').length){
				var v = jQuery('.currency-selector-box').find('.active').text();
				jQuery('.currency-selector-box').find(currencyActive).find('.cur-text').text(v);
			}
			
			buttons.click(function(e) {
				e.preventDefault();
				if(jQuery(this).hasClass('active')) return false;
				
				var newCurrency = $(this).attr('data-currency');
				$('[data-currency]').removeClass('active');
				$('[data-currency="'+newCurrency+'"]').addClass('active');
				
				if(jQuery('.currency-selector-box').length){
					var t = jQuery('.currency-selector-box').find('.active').find('a').text();
					jQuery('.currency-selector-box').find(currencyActive).find('.cur-text').text(t);
				}
				currencyActive.removeClass('opened');
				currencySelector.removeClass('opened');
				
				newCurrency != Currency.currentCurrency && Currency.convertAll(Currency.currentCurrency, newCurrency, 'span.money', 'money_format');
			});
		
			
			$('body').on('refreshCurrency', function() {
				Currency.convertAll(shopCurrency, jQuery(".currency .active").attr('data-currency'));
			});
		});
	</script>
{%- endif -%}


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               




